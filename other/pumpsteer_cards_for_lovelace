# PumpSteer Lovelace Cards

type: entities
title: üîß PumpSteer ‚Äì Drift & Status
show_header_toggle: false
entities:
  - entity: sensor.pumpsteer
    name: Fejkad utetemperatur
    secondary_info: last-changed
  - entity: sensor.pumpsteer_operating_mode
    name: Driftl√§ge
    secondary_info: last-changed
  - entity: sensor.pumpsteer_is_preboosting
    name: Preboost aktiv
    secondary_info: last-changed
  - entity: sensor.pumpsteer_is_braking
    name: Broms aktiv
    secondary_info: last-changed
  - type: divider
  - entity: sensor.real_outdoor_temperature
    name: Outdoor
    secondary_info: last-changed
  - type: attribute
    entity: sensor.pumpsteer
    attribute: indoor_temperature
    name: Indoor
    suffix: ¬∞C
  - entity: sensor.pumpsteer_current_price_level
    name: Elprisniv√•
    icon: mdi:chart-bell-curve-cumulative
    secondary_info: last-changed
  - type: divider
  - entity: input_number.house_inertia
    secondary_info: last-changed
  - entity: input_number.pumpsteer_aggressiveness
    secondary_info: last-changed
  - entity: input_number.indoor_target_temperature
  - entity: input_number.pumpsteer_summer_threshold
  - entity: input_text.hourly_forecast_temperatures
    name: Forecast Data (raw)
    secondary_info: last-changed
  - entity: sensor.pumpsteer_price_category
  - entity: sensor.pumpsteer_status_summary
  - entity: sensor.pumpsteer_efficiency_score
  - entity: input_boolean.pumpsteer_preboost_enabled
  - entity: input_select.pumpsteer_price_model
state_color: true


###### Attributes #####

type: entities
title: PumpSteer Attribute
entities:
  - entity: sensor.pumpsteer
    name: Status
    attribute: status
    icon: mdi:check-circle
  - type: attribute
    entity: sensor.pumpsteer
    attribute: mode
    name: Mode
  - type: attribute
    entity: sensor.pumpsteer
    attribute: fake_outdoor_temperature
    name: Fake Outdoor Temp
    suffix: ¬∞C
  - type: attribute
    entity: sensor.pumpsteer
    attribute: price_category
    name: Price Category
  - type: attribute
    entity: sensor.pumpsteer
    attribute: current_price
    name: Current Price
    suffix: SEK/kWh
  - type: attribute
    entity: sensor.pumpsteer
    attribute: max_price
    name: Max Price
    suffix: SEK/kWh
  - type: attribute
    entity: sensor.pumpsteer
    attribute: aggressiveness
    name: Aggressiveness
  - type: attribute
    entity: sensor.pumpsteer
    attribute: inertia
    name: Inertia
  - type: attribute
    entity: sensor.pumpsteer
    attribute: target_temperature
    name: Target Temp
    suffix: ¬∞C
  - type: attribute
    entity: sensor.pumpsteer
    attribute: indoor_temperature
    name: Indoor Temp
    suffix: ¬∞C
  - type: attribute
    entity: sensor.pumpsteer
    attribute: outdoor_temperature
    name: Outdoor Temp
    suffix: ¬∞C
  - type: attribute
    entity: sensor.pumpsteer
    attribute: braking_threshold_percent
    name: Braking Threshold
    suffix: "%"
  - type: attribute
    entity: sensor.pumpsteer
    attribute: price_factor_percent
    name: Price Factor
    suffix: "%"
  - type: attribute
    entity: sensor.pumpsteer
    attribute: holiday_mode
    name: Holiday Mode
  - type: attribute
    entity: sensor.pumpsteer
    attribute: last_updated
    name: Last Updated
  - type: attribute
    entity: sensor.pumpsteer
    attribute: temp_error_c
    name: Temp Error
    suffix: ¬∞C
  - type: attribute
    entity: sensor.pumpsteer
    attribute: to_summer_threshold_c
    name: To Summer Threshold
    suffix: ¬∞C
  - type: attribute
    entity: sensor.pumpsteer
    attribute: saving_potential_sek_per_kwh
    name: Saving Potential
    suffix: SEK/kWh
  - type: attribute
    entity: sensor.pumpsteer
    attribute: next_3_hours_prices
    name: Next 3h Prices
    suffix: SEK/kWh
  - type: attribute
    entity: sensor.pumpsteer
    attribute: decision_reason
    name: Decision Reason

####### Apexchart #####

type: custom:apexcharts-card
graph_span: 24h
header:
  show: true
  title: 24 Timmar - Temperatur & Elpris
  show_states: true
yaxis:
  - id: temp
    min: auto
    max: auto
    decimals: 1
    apex_config:
      tickAmount: 5
      labels:
        formatter: |
          EVAL:function(val) {
            return val.toFixed(1) + ' ¬∞C';
          }
      title:
        text: Temperatur (¬∞C)
  - id: price
    min: auto
    max: auto
    decimals: 2
    opposite: true
    apex_config:
      tickAmount: 5
      labels:
        formatter: |
          EVAL:function(val) {
            return val.toFixed(2) + ' √∂re';
          }
      title:
        text: Elpris (√∂re/kWh)
series:
  - entity: sensor.pumpsteer
    name: Pumpstyrning
    type: line
    yaxis_id: temp
    color: "#00bcd4"
    stroke_width: 2
  - entity: sensor.yttertemp_no
    name: Temperatur Nu
    type: line
    yaxis_id: temp
    color: "#ff9800"
    stroke_width: 2
  - entity: sensor.shelly_h_t_temp_temperature
    name: Temp Hall Nere
    type: line
    yaxis_id: temp
    color: "#4caf50"
    stroke_width: 2
  - entity: sensor.nordpool_kwh_se3_sek_3_10_025
    name: Nordpool Tibber
    type: line
    yaxis_id: price
    color: "#f44336"
    stroke_width: 2

####

type: entities
title: üîß PumpSteer ‚Äì Semster
show_header_toggle: false
entities:
  - entity: input_boolean.holiday_mode
  - entity: input_datetime.holiday_start
  - entity: input_datetime.holiday_end
###################


## 1. Enkel huvudstatus

type: entities
title: üîß PumpSteer ‚Äì Drift & Status (Enkel)
show_header_toggle: false
entities:
  - entity: sensor.pumpsteer
    name: Fejkad utetemperatur
    secondary_info: last-changed
  - entity: sensor.pumpsteer_status_summary
    name: Status
    secondary_info: last-changed
  - entity: sensor.pumpsteer_is_preboosting
    name: Preboost aktiv
    secondary_info: last-changed
  - entity: sensor.pumpsteer_is_braking
    name: Broms aktiv
    secondary_info: last-changed
  - entity: sensor.real_outdoor_temperature
    name: Ute
    secondary_info: last-changed
  - type: attribute
    entity: sensor.pumpsteer
    attribute: indoor_temperature
    name: Inomhus Temp
    suffix: ¬∞C
  - entity: input_number.pumpsteer_aggressiveness
    name: Aggrevisitet
  - entity: input_number.indoor_target_temperature
    name: M√•ltemperatur
  - entity: input_number.pumpsteer_summer_threshold
    name: Sommartr√∂skel
  - entity: input_number.house_inertia
    name: Husets Tr√∂ghet
    secondary_info: last-changed
    name: Autotune aktiverat
  - entity: input_boolean.pumpsteer_preboost_enabled
  - entity: sensor.pumpsteer_data_quality

## Forts√§ttning, enkel. 

type: vertical-stack
cards:
  - type: entities
    title: üîß PumpSteer ‚Äì Semster
    show_header_toggle: false
    entities:
      - entity: input_boolean.holiday_mode
      - entity: input_datetime.holiday_start
      - entity: input_datetime.holiday_end
  - type: markdown
    content: |
      ### üèñÔ∏è Semestermode
      <small>
      Styr som om ingen √§r hemma:

      - M√•ltemp: **16‚ÄØ¬∞C**  
      - V√§rmer bara vid **l√•ga elpriser**  
      Aktivera i god tid innan hemkomst!
      </small>
      ### ‚öôÔ∏è Inst√§llningar
      <small>
      **Aggressivitet (0‚Äì5)**  
      Hur mycket systemet prioriterar besparing:

      - `0` = Ingen optimering  
      - `3` = Balanserad  
      - `5` = Max besparing

      **Tr√∂ghet (0.1‚Äì5.0)**  
      Hur snabbt huset reagerar:

      - L√•gt = Snabbt hus  
      - H√∂gt = Tr√∂gt hus


## 2. Temperaturer

type: entities
title: üå°Ô∏è Temperaturer
show_header_toggle: false
entities:
  - entity: sensor.pumpsteer
    name: Fake Utomhustemperatur
    icon: mdi:thermometer
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Indoor Temperature
    name: Inomhustemperatur
    icon: mdi:home-thermometer
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Target Temperature
    name: M√•ltemperatur
    icon: mdi:target
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Outdoor Temperature
    name: Verklig Utomhustemperatur
    icon: mdi:weather-partly-cloudy
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Temp Error (¬∞C)
    name: Temperaturfel
    icon: mdi:thermometer-alert
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Summer Threshold
    name: Sommartr√∂skel
    icon: mdi:weather-sunny
  - type: attribute
    entity: sensor.pumpsteer
    attribute: To Summer Threshold (¬∞C)
    name: Till Sommartr√∂skel
    icon: mdi:thermometer-lines


## 3. Elpriser och ekonomi

type: entities
title: ‚ö° Elpriser
show_header_toggle: false
entities:
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Current Price
    name: Aktuellt Pris (kr/kWh)
    icon: mdi:flash
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Max Price
    name: Max Pris Idag
    icon: mdi:flash-alert
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Saving Potential (SEK/kWh)
    name: Besparingspotential
    icon: mdi:piggy-bank
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Price Factor (%)
    name: Prisfaktor
    icon: mdi:percent
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Price Category
    name: Kategori Nu
    icon: mdi:tag
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Current Hour
    name: Aktuell Timme
    icon: mdi:clock
```

## 4. Inst√§llningar och kontroller

```yaml
type: entities
title: üéõÔ∏è Kontroller
show_header_toggle: false
entities:
  - entity: input_number.pumpsteer_aggressiveness
    name: Aggressivitet
  - entity: input_number.house_inertia
    name: Husets Tr√∂ghet
  - entity: input_number.indoor_target_temperature
    name: M√•ltemperatur
  - entity: input_number.pumpsteer_summer_threshold
    name: Sommartr√∂skel
  - entity: input_select.pumpsteer_price_model
    name: Prismodell
  - entity: input_boolean.holiday_mode
    name: Semesterl√§ge
  - type: divider
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Aggressiveness
    name: Nuvarande Aggressivitet
    icon: mdi:speedometer
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Inertia
    name: Nuvarande Tr√∂ghet
    icon: mdi:home-analytics
```


```yaml
type: entities
title: ü§ñ Maskininl√§rning
show_header_toggle: false
entities:
    icon: mdi:brain
  - type: attribute
    attribute: success_rate
    name: Framg√•ngsgrad
    icon: mdi:chart-line
  - type: attribute
    attribute: avg_heating_duration
    name: Snitt Uppv√§rmningstid
    icon: mdi:clock
  - type: attribute
    attribute: most_used_aggressiveness
    name: Mest Anv√§nd Aggressivitet
    icon: mdi:gauge
  - type: attribute
    attribute: total_heating_sessions
    name: Antal Uppv√§rmningar
    icon: mdi:fire
  - type: attribute
    attribute: auto_tune_active
    name: Auto-Tune Aktiv
    icon: mdi:robot
  - type: attribute
    attribute: last_updated
    name: Senast Uppdaterad
    icon: mdi:clock-outline
```

## 6. Detaljerad info

```yaml
type: entities
title: üìä Detaljerad Status
show_header_toggle: false
entities:
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Decision Reason
    name: Beslutorsak
    icon: mdi:lightbulb
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Braking Threshold (%)
    name: Bromsningstr√∂skel
    icon: mdi:speedometer
  - type: attribute
    entity: sensor.pumpsteer
    attribute: To Summer Threshold (¬∞C)
    name: Till Sommartr√∂skel
    icon: mdi:weather-sunny
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Holiday Mode
    name: Semesterl√§ge
    icon: mdi:airplane
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Last Updated
    name: Senast Uppdaterad
    icon: mdi:clock
```

## 7. N√§sta timmar och prisprognoser

```yaml
type: entities
title: üîÆ Prisprognoser
show_header_toggle: false
entities:
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Next 3 Hours Prices
    name: N√§sta 3h Priser
    icon: mdi:clock-fast
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Current Hour
    name: Aktuell Timme
    icon: mdi:clock
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Price Categories All Hours
    name: Alla Dagens Kategorier
    icon: mdi:view-list
  - type: section
    label: Datakvalitet
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Data Quality
    name: Data Quality Info
    icon: mdi:database-check
```

## 8. Enkel glance-√∂versikt

```yaml
type: glance
title: PumpSteer Snabb√∂versikt
entities:
  - entity: sensor.pumpsteer
    name: Fake Temp
  - entity: input_number.pumpsteer_aggressiveness
    name: Aggressivitet
  - entity: input_number.house_inertia
    name: Tr√∂ghet
  - entity: input_boolean.holiday_mode
    name: Semester
```

## 9. Gauge f√∂r temperaturfel (verkliga v√§rden)

```yaml
type: gauge
entity: sensor.pumpsteer
name: Temperaturfel
attribute: Temp Error (¬∞C)
min: -5
max: 5
severity:
  green: -1
  yellow: -2
  red: -3
needle: true
```

## 17. Sommarl√§ge Status

```yaml
type: entities
title: ‚òÄÔ∏è Sommarl√§ge Aktiv
show_header_toggle: false
entities:
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Mode
    name: Nuvarande L√§ge
    icon: mdi:weather-sunny
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Outdoor Temperature
    name: Utomhustemperatur
    icon: mdi:thermometer
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Summer Threshold
    name: Sommartr√∂skel
    icon: mdi:thermometer-lines
  - type: attribute
    entity: sensor.pumpsteer
    attribute: To Summer Threshold (¬∞C)
    name: √ñver Tr√∂skel Med
    icon: mdi:arrow-up-thick
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Decision Reason
    name: Systemets Beslut
    icon: mdi:lightbulb
```

## 10. Historia-graf f√∂r fake temperatur

```yaml
type: history-graph
title: PumpSteer Temperatur Historik
entities:
  - entity: sensor.pumpsteer
    name: Fake Temperatur
hours_to_show: 24
refresh_interval: 60
```

## 11. Markdown-kort med sammanfattning

```yaml
type: markdown
title: üìã PumpSteer Sammanfattning
content: >
  **Aktuellt l√§ge:** {{ state_attr('sensor.pumpsteer', 'Mode') }}
  
  **Fake temperatur:** {{ states('sensor.pumpsteer') }}¬∞C
  
  **Priskategori:** {{ state_attr('sensor.pumpsteer', 'Price Category') }}
  
  **Temperaturfel:** {{ state_attr('sensor.pumpsteer', 'Temp Error (¬∞C)') }}¬∞C
  
  **Aggressivitet:** {{ states('input_number.pumpsteer_aggressiveness') }}
  
  **Husets tr√∂ghet:** {{ states('input_number.house_inertia') }}
  
  ---
  
  *Senast uppdaterad: {{ state_attr('sensor.pumpsteer', 'Last Updated') }}*
```

## 12. Kompakt statuskort

```yaml
type: entities
title: üöÄ PumpSteer Kompakt
show_header_toggle: false
entities:
  - entity: sensor.pumpsteer
    name: Fake Temperatur
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Mode
    name: L√§ge
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Current Price
    name: Elpris nu
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Price Category
    name: Priskategori
  - entity: input_number.pumpsteer_aggressiveness
    name: Aggressivitet
  - entity: input_boolean.holiday_mode
    name: Semester
```


```yaml
type: entities
show_header_toggle: false
entities:
  - type: attribute
    attribute: recommendations
    name: AI R√•d
    icon: mdi:lightbulb
  - type: attribute
    attribute: success_rate
    name: Nuvarande Framg√•ng
    icon: mdi:percent
  - type: attribute
    attribute: most_used_aggressiveness
    name: Din Aggressivitet
    icon: mdi:speedometer
    name: Auto-Tune Aktivera
    icon: mdi:robot
```


```yaml
type: entities
show_header_toggle: false
entities:
  - type: attribute
    attribute: total_heating_sessions
    name: Totalt Antal Uppv√§rmningar
    icon: mdi:counter
  - type: attribute
    attribute: avg_heating_duration
    name: Genomsnittlig Tid
    icon: mdi:timer
  - type: attribute
    attribute: success_rate
    name: Framg√•ngsgrad
    icon: mdi:chart-donut
  - type: attribute
    attribute: most_used_aggressiveness
    name: Popul√§raste Inst√§llning
    icon: mdi:trending-up
  - type: section
    label: System
    icon: mdi:brain
  - type: attribute
    attribute: auto_tune_active
    name: Auto-Tune
    icon: mdi:robot
```

```yaml
type: entities
title: üîç Alla PumpSteer Attribut
show_header_toggle: false
entities:
  - type: section
    label: Temperaturer
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Indoor Temperature
    name: Inne
    icon: mdi:home-thermometer
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Outdoor Temperature
    name: Ute (verklig)
    icon: mdi:thermometer
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Target Temperature
    name: M√•l
    icon: mdi:target

  - type: section
    label: Priser
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Current Price
    name: Nu
    icon: mdi:flash
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Max Price
    name: Max idag
    icon: mdi:flash-alert
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Saving Potential (SEK/kWh)
    name: Besparing
    icon: mdi:piggy-bank

  - type: section
    label: System
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Mode
    name: L√§ge
    icon: mdi:cog
  - type: attribute
    entity: sensor.pumpsteer
    attribute: Decision Reason
    name: Anledning
    icon: mdi:lightbulb
```

Tack f√∂r r√§ttelsen! Nu ska alla kort fungera perfekt med r√§tt syntax.
